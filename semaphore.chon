{"id":14,"name":"semaphore","agents":[{"archClass":"jason.Argo","name":"newAgent","sourceCode":"/* Initial beliefs and rules */\n\n/* Initial goals */\n\n!start.\n\n/* Plans */\n\n+!start <- \n\t.argo.port(ttyUSB0);\n\t.argo.percepts(open);\n\t.argo.limit(100);\n.\n\n+statusLed(offf) <-\n\t.argo.act(ledOn);\n.\n\n+statusLed(onn) <-\n\t.argo.act(ledOff);\n.\n\n+statusSemaforo(aberto) <- \n\t.wait(3000);\n\t.argo.act(reduzirSemaforo);\n.\n\n+statusSemaforo(reduzir) <- \n\t.wait(1000);\n\t.argo.act(fecharSemaforo);\n.\n\n+statusSemaforo(fechado) <- \n\t.wait(2000);\n\t.argo.act(abrirSemaforo);\n."}],"firmwares":[{"name":"semaforo","sourceCode":"#include <Javino.h>\n\nJavino javino;\n\nString statusSemaforo = \"aberto\"; // aberto; reduzir; fechado\n\nvoid setup() {\n\tpinMode(13, OUTPUT);\n\tpinMode(12, OUTPUT); // Modo de operacao da GPIO (General Porpuse Input Output)\n\tpinMode(11, OUTPUT);\n\tpinMode(10, OUTPUT);\n\n\tjavino.start(9600); \t\t\t// Definindo velocidade da comunicacao\n\n\tjavino.act[\"ledOn\"] = ligarLed; \t// Definindo uma acao\n\tjavino.act[\"ledOff\"] = desligarLed;\n\tjavino.act[\"blink\"] = blink;\n\n\tjavino.act[\"abrirSemaforo\"] = abrirSemaforo;\n\tjavino.act[\"fecharSemaforo\"] = fecharSemaforo;\n\tjavino.act[\"reduzirSemaforo\"] = reduzirSemaforo;\n\n\tjavino.perceive(informarAgente);\n\n\tabrirSemaforo();\n}\n\nvoid loop() {\n\tjavino.run();\n}\n\nvoid informarAgente() {\n\tif (digitalRead(13) == HIGH){\n\t\tjavino.addPercept(\"statusLed(on)\");\n\t} else {\n\t\tjavino.addPercept(\"statusLed(off)\");\n\t}\n\tjavino.addPercept(\"statusSemaforo(\" + statusSemaforo + \")\");\n}\n\n// Funcao obrigatoria para o Javino\nvoid serialEvent() {\n\tjavino.readSerial();\n}\n\nvoid ligarLed() {\n\tdigitalWrite(13, HIGH);\n}\n\nvoid desligarLed() {\n\tdigitalWrite(13, LOW);\n}\n\nvoid abrirSemaforo() {\n\tstatusSemaforo = \"aberto\";\n\tdigitalWrite(12, HIGH);\n\tdigitalWrite(11, LOW);\n\tdigitalWrite(10, LOW);\n}\n\nvoid reduzirSemaforo() {\n\tstatusSemaforo = \"reduzir\";\n\tdigitalWrite(12, LOW);\n\tdigitalWrite(11, HIGH);\n\tdigitalWrite(10, LOW);\n}\n\n\nvoid fecharSemaforo() {\n\tstatusSemaforo = \"fechado\";\n\tdigitalWrite(12, LOW);\n\tdigitalWrite(11, LOW);\n\tdigitalWrite(10, HIGH);\n}\n\nvoid blink() {\n\tdigitalWrite(12, HIGH);\n\tdigitalWrite(11, LOW);\n\tdelay(1000);\n\tdigitalWrite(12, LOW);\n\tdigitalWrite(11, HIGH);\n\tdigitalWrite(10, LOW);\n\tdelay(1000);\n\tdigitalWrite(11, LOW);\n\tdigitalWrite(10, HIGH);\n\tdelay(1000);\n\tdigitalWrite(10, LOW);\n}"}]}